{"title":"Jenkins 安装","slug":"Install/jenkins-install","date":"2021-12-04T13:41:10.000Z","updated":"2023-11-29T02:42:01.745Z","comments":true,"path":"api/articles/Install/jenkins-install.json","realPath":null,"excerpt":null,"covers":["/images/article/jenkins/install.png"],"cover":"/images/background/jenkins-install.jpg","content":"<h3 id=\"Jenkins简介\"><a href=\"#Jenkins简介\" class=\"headerlink\" title=\"Jenkins简介\"></a>Jenkins简介</h3><p>Jenkins是一个用Java编写的开源的持续集成工具，提供了软件开发的持续集成服务。</p>\n<h4 id=\"官方地址\"><a href=\"#官方地址\" class=\"headerlink\" title=\"官方地址\"></a><a href=\"https://www.jenkins.io/zh/\">官方地址</a></h4><h3 id=\"Jenkins安装部署\"><a href=\"#Jenkins安装部署\" class=\"headerlink\" title=\"Jenkins安装部署\"></a>Jenkins安装部署</h3><ol>\n<li>安装JDK</li>\n</ol>\n<p>jenkins推荐安装<a href=\"http://jdk.java.net/java-se-ri/11\">JDK11</a></p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">// 下载JDK<br>wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz<br><br>// 解压JDK<br>tar -zxvf openjdk-11+28_linux-x64_bin.tar.gz<br><br>// 配置环境变量<br>vim /etc/profile<br><br>// 在/etc/profile底部加入<br><span class=\"hljs-built_in\">export</span> JAVA_HOME=/opt/jdk-11<br><span class=\"hljs-built_in\">export</span> CLASSPATH=.:<span class=\"hljs-variable\">${JAVA_HOME}</span>/lib<br><span class=\"hljs-built_in\">export</span> PATH=<span class=\"hljs-variable\">${PATH}</span>:<span class=\"hljs-variable\">${JAVA_HOME}</span>/bin<br><br>// 刷新文件<br><span class=\"hljs-built_in\">source</span> /etc/profile<br><br>// 查看Java版本是否和下载的一致<br>java -version<br><br>// 我的JDK显示一下信息<br>openjdk version <span class=\"hljs-string\">\"11\"</span> 2018-09-25<br>OpenJDK Runtime Environment 18.9 (build 11+28)<br>OpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"2\">\n<li>下载Jenkins</li>\n</ol>\n<p><a href=\"https://www.jenkins.io/zh/download/\">根据自己实际情况在官网下载</a></p>\n<p>我使用的是Debian系统，<a href=\"https://pkg.jenkins.io/debian-stable/\">安装过程</a></p>\n<ol start=\"3\">\n<li>启动jenkins</li>\n</ol>\n<p>启动命令</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">sudo service jenkins start<br></code></pre></td></tr></tbody></table></figure>\n<p>如果启动报错</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">Job <span class=\"hljs-keyword\">for</span> jenkins.service failed because the control process exited with error code.<br>See <span class=\"hljs-string\">\"systemctl status jenkins.service\"</span> and <span class=\"hljs-string\">\"journalctl -xe\"</span> <span class=\"hljs-keyword\">for</span> details.<br></code></pre></td></tr></tbody></table></figure>\n<p>大概率就是/etc/init.d/jenkins文件读取不到JDK</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">// 打开文件<br>sudo vim /etc/init.d/jenkins<br><br>// 需要在PATH变量加入java的路径 将java路径改成你自己的<br>PATH=/bin:/usr/bin:/sbin:/usr/sbin:/home/sakura/jdk-11/bin<br><br>// 刷新配置<br>sudo systemctl daemon-reload<br><br>// 启动jenkins<br>sudo service jenkins start<br></code></pre></td></tr></tbody></table></figure>\n\n<ol start=\"4\">\n<li>进入Jenkins</li>\n</ol>\n<p>在浏览器输入 <a href=\"http://ip:8080/\">http://IP:8080</a> 进入 Jenkins 页面</p>\n<p>大概率会看到以下报错</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">AWT is not properly configured on this server. Perhaps you need to run your container with <br><span class=\"hljs-string\">\"-Djava.awt.headless=true\"</span>? See also: https://www.jenkins.io/redirect/troubleshooting/java.awt.headless<br></code></pre></td></tr></tbody></table></figure>\n\n<p>就是因为系统没有字体导致的，<a href=\"https://www.jenkins.io/redirect/troubleshooting/java.awt.headless\">需要根据自己系统安装工具</a><br>我的服务器需要安装以下工具</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">// 安装这个就够了<br>sudo apt-get install fontconfig<br><br>// 实在不行在安装这两个<br>sudo apt-get install ttf-dejavu<br>sudo apt-get install xvfb<br><br>fc-cache --force<br><br>// 重启jenkins<br>sudo service jenkins restart<br></code></pre></td></tr></tbody></table></figure>\n\n<p>刷新 Jenkins 页面可以看到以下话面<br><img src=\"/images/article/jenkins/install.png\"><span class=\"image-caption\">安装 Jenkins</span></p>\n<p>根据浏览器提示进行找到密码并继续</p>\n<p>选择 安装推荐的插件 安装Jenkins，并等待安装</p>\n<p>插件安装失败不用紧，直接继续就好了，有需要就创建用户，没需要就使用admin账号</p>\n<p>进入jenkins之后最好修改以下admin密码</p>\n<p>admin -&gt; configure 拉到下面可以修改账号密码</p>\n<p>Manage Jenkins -&gt; Manager Plugin -&gt; ADVANCED<br>最下面有 Update Site 设置为：<br><a href=\"https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json\">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p>\n<p>修改为中文需要安装插件 Localization: Chinese（Simplified）</p>\n<p>以上就是安装Jenkins的全过程了，如果什么问题可以在下方评论。</p>\n","more":"<h3 id=\"Jenkins简介\"><a href=\"#Jenkins简介\" class=\"headerlink\" title=\"Jenkins简介\"></a>Jenkins简介</h3><p>Jenkins是一个用Java编写的开源的持续集成工具，提供了软件开发的持续集成服务。</p>\n<h4 id=\"官方地址\"><a href=\"#官方地址\" class=\"headerlink\" title=\"官方地址\"></a><a href=\"https://www.jenkins.io/zh/\">官方地址</a></h4><h3 id=\"Jenkins安装部署\"><a href=\"#Jenkins安装部署\" class=\"headerlink\" title=\"Jenkins安装部署\"></a>Jenkins安装部署</h3><ol>\n<li>安装JDK</li>\n</ol>\n<p>jenkins推荐安装<a href=\"http://jdk.java.net/java-se-ri/11\">JDK11</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">// 下载JDK<br>wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz<br><br>// 解压JDK<br>tar -zxvf openjdk-11+28_linux-x64_bin.tar.gz<br><br>// 配置环境变量<br>vim /etc/profile<br><br>// 在/etc/profile底部加入<br><span class=\"hljs-built_in\">export</span> JAVA_HOME=/opt/jdk-11<br><span class=\"hljs-built_in\">export</span> CLASSPATH=.:<span class=\"hljs-variable\">$&#123;JAVA_HOME&#125;</span>/lib<br><span class=\"hljs-built_in\">export</span> PATH=<span class=\"hljs-variable\">$&#123;PATH&#125;</span>:<span class=\"hljs-variable\">$&#123;JAVA_HOME&#125;</span>/bin<br><br>// 刷新文件<br><span class=\"hljs-built_in\">source</span> /etc/profile<br><br>// 查看Java版本是否和下载的一致<br>java -version<br><br>// 我的JDK显示一下信息<br>openjdk version <span class=\"hljs-string\">&quot;11&quot;</span> 2018-09-25<br>OpenJDK Runtime Environment 18.9 (build 11+28)<br>OpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)<br></code></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>下载Jenkins</li>\n</ol>\n<p><a href=\"https://www.jenkins.io/zh/download/\">根据自己实际情况在官网下载</a></p>\n<p>我使用的是Debian系统，<a href=\"https://pkg.jenkins.io/debian-stable/\">安装过程</a></p>\n<ol start=\"3\">\n<li>启动jenkins</li>\n</ol>\n<p>启动命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">sudo service jenkins start<br></code></pre></td></tr></table></figure>\n<p>如果启动报错</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">Job <span class=\"hljs-keyword\">for</span> jenkins.service failed because the control process exited with error code.<br>See <span class=\"hljs-string\">&quot;systemctl status jenkins.service&quot;</span> and <span class=\"hljs-string\">&quot;journalctl -xe&quot;</span> <span class=\"hljs-keyword\">for</span> details.<br></code></pre></td></tr></table></figure>\n<p>大概率就是&#x2F;etc&#x2F;init.d&#x2F;jenkins文件读取不到JDK</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">// 打开文件<br>sudo vim /etc/init.d/jenkins<br><br>// 需要在PATH变量加入java的路径 将java路径改成你自己的<br>PATH=/bin:/usr/bin:/sbin:/usr/sbin:/home/sakura/jdk-11/bin<br><br>// 刷新配置<br>sudo systemctl daemon-reload<br><br>// 启动jenkins<br>sudo service jenkins start<br></code></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>进入Jenkins</li>\n</ol>\n<p>在浏览器输入 <a href=\"http://ip:8080/\">http://IP:8080</a> 进入 Jenkins 页面</p>\n<p>大概率会看到以下报错</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">AWT is not properly configured on this server. Perhaps you need to run your container with <br><span class=\"hljs-string\">&quot;-Djava.awt.headless=true&quot;</span>? See also: https://www.jenkins.io/redirect/troubleshooting/java.awt.headless<br></code></pre></td></tr></table></figure>\n\n<p>就是因为系统没有字体导致的，<a href=\"https://www.jenkins.io/redirect/troubleshooting/java.awt.headless\">需要根据自己系统安装工具</a><br>我的服务器需要安装以下工具</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">// 安装这个就够了<br>sudo apt-get install fontconfig<br><br>// 实在不行在安装这两个<br>sudo apt-get install ttf-dejavu<br>sudo apt-get install xvfb<br><br>fc-cache --force<br><br>// 重启jenkins<br>sudo service jenkins restart<br></code></pre></td></tr></table></figure>\n\n<p>刷新 Jenkins 页面可以看到以下话面<br><img  src=\"/images/article/jenkins/install.png\"  ><span class=\"image-caption\">安装 Jenkins</span></p>\n<p>根据浏览器提示进行找到密码并继续</p>\n<p>选择 安装推荐的插件 安装Jenkins，并等待安装</p>\n<p>插件安装失败不用紧，直接继续就好了，有需要就创建用户，没需要就使用admin账号</p>\n<p>进入jenkins之后最好修改以下admin密码</p>\n<p>admin -&gt; configure 拉到下面可以修改账号密码</p>\n<p>Manage Jenkins -&gt; Manager Plugin -&gt; ADVANCED<br>最下面有 Update Site 设置为：<br><a href=\"https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json\">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p>\n<p>修改为中文需要安装插件 Localization: Chinese（Simplified）</p>\n<p>以上就是安装Jenkins的全过程了，如果什么问题可以在下方评论。</p>\n","categories":[{"name":"安装","path":"api/categories/安装.json"}],"tags":[{"name":"jenkins","path":"api/tags/jenkins.json"},{"name":"ci/cd","path":"api/tags/ci/cd.json"}]}